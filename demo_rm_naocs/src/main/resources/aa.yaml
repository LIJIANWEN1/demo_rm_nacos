server:
  prot: 8099
  servlet:
    context-path: /demoapi
spring:
  profiles:
    active: 6.0
  autoconfigure:
    exclude: org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
  messages:
    basename: i18n/messages
    encoding: UTF-8
    fallbackToSystemLocale: true
  thymeleaf:
    prefix: classpath:/static/
    suffix: .html
    cache: false
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
  redis:
    database: 0
    # 根据Redis部署地址更改IP
    host: 100.90.27.5
    jedis:
      pool:
        max-active: 20

        max-idle: 10

        max-wait: -1

        min-idle: 5

    password: Dctm@1234

    port: 6379

  servlet:

    multipart:

      enabled: true

      file-size-threshold: 100MB

      location: /amberdata/tdr/data

      max-file-size: 5120MB

      max-request-size: 5120MB

  elasticsearch:

    rest:

      # 根据ES部署地址更改IP

      uris: [ "100.90.27.5:9200" ]

      username: admin

      password: Dctm@1234

  datasource:

    driver-class-name: com.mysql.jdbc.Driver

    hikari:

      auto-commit: true

      connection-timeout: 30000

      idle-timeout: 180000

      max-lifetime: 1800000

      maximum-pool-size: 50

      minimum-idle: 10

    password: Dctm@1234

    # 根据Mysql部署地址更改IP

    url: jdbc:mysql://100.90.27.5:3306/tdr?useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=Asia/Shanghai

    username: root

logging:

  path: ./logs

  level:

    root: INFO

    org.hibernate: INFO

    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

    org.hibernate.type.descriptor.sql.BasicExtractor: TRACE

cn:

  amberdata:
    cockpitTitleResource: http://10.68.190.225/amberdata/jb.png

    # 档号特殊字符正则校验配置，目前[a-z0-9A-Z\\-·]+是大小写字母、数字、【-】、【·】

    archive-id-verify: ""

    archive-title: 此件涉密，不扫描，不挂接

    archive-author: 空

    archive-articleNumber: 空

    # 档案同步查档直通车topic，也可不进行配置，默认使用RECORD_SYNC_TO_PLATFORM

    record-sync-topic: RECORD_SYNC_TO_PLATFORM

    # 【涉密质检】涉密等级配置（密级标准代码项值，逗号分开），配置后的等级判定为涉密

    secret-level: L2,L3

    sso:

      # 登录中心地址，根据admin部署地址更改IP

      login-domain: http://10.68.190.225

    # CDN地址

    cdn:

      host: http://10.68.190.225/cdn

    index:

      hash: 3a6e9a9bc2ce0e385eb3,74680ca057667e490285,74680ca057667e490285,4843f1a76ee528e184db,5ce8e6dcef655964bd1a,7c75bbd384632db1a312,411ff19711efbf9d8469,411ff19711efbf9d8469,[gitBranch=release/V1.11.0]-[gitUser=chenlongwei]-[打包时间=2023-10-13 10:50]-[COMMIT_SHA=a41e3e53fa44921d530b8925224f3f70260d8a64]

    rocketmq:

      consumer:

        # 组名，无需更改

        group-name: GP_TDR

        # 配置mq消费者 IP（mq统一部署IP）

        namesrv-addr: 100.90.27.5:9876

        # 主题名，无需更改

        topic: TP_ADMIN_NEW

      producer:

        group-name: tdr-group

        # 配置mq生产者 IP（mq统一部署IP）

        namesrv-addr: 100.90.27.5:9876

        max-message-size: 12582912

    config:

      cache:

        init-caches:

          ermsapi-default:

            name: default

            ttl: -1

          ermsapi-other:

            name: other

            ttl: -1

    boot:

      blobstore:

        spring:

          boot:

            # 根据现场云存储类型进行更改：MinIOBlobStore（需部署MinIo）,
            # OSSBlobStore（阿里云）,OBSBlobStore(华为云)
            blob-store-impl-name: MinIOBlobStore
            primaryBId: 1
            routeStrategy: random
            store-nodes:
              - bId: 1
                endPoint: http://100.90.27.5:9000
                accessKey: admin
                secretKey: Dctm@1234
                bucketName: tdr
                desc: tdr

    borrow:

      roleName: 档案管理员

    # 根据OCR��务部�������址更改IP

    ocr:

      url: http://10.68.190.225:8868/predict/ocr_system

    ocrUrl: http://10.68.190.225:8868/predict/ocr_system

    consult:

      manIdNumberKey: NFSFZH

      manIdNameKey: NFXM

      womanIdNumberKey: NVFSFZH

      womanIdNameKey: NVFXM

      formConfigName: 查档记录表单

      # 临时查档页面，生成查档记录，需配置记录生成的单位

      formUnitId: bg14026020113907712

    asr:

      url: ws://10.68.190.225:9090/paddlespeech/asr/streaming

    # 是否开启文档打标功能

    label-open: true

    # 根据文件获取标签列表的接口地址

    label-list-url: "http://10.68.190.225:17998/XS_pos"

dubbo:

  application:

    metadata-service-protocol: tri

  protocol:

    name: tri # 使用triple协议

    port: -1  # port -1代表缺醒配置，triple协议默认使用的50051

  registry:

    address: zookeeper://100.90.27.5:2181?client=curator

  consumer:

    check: false  #关闭订阅服务是否启动的检查【检查时，没有服务提供者会报错】



# 去除db健康检查，影响整个sofaBoot启动，导致服务无法发布

management:

  health:

    db:

      enabled: false

# afc everyone 、 owner的权限配置

ace:

  everyone:

    access:

      id: bg000000000000000

      permit: Browse

  owner:

    access:

      id: bufffffffffffffff

      permit: Delete

      permit.extend: Change_Owner\,Change_Permit

# afc默认权限配置

default:

  acl:

    id: ba830238567694336

documents:

  linkpath:

    table: da_tdr_documents_link

  table: da_tdr_documents

# afc的es连接

es:

  client:

    keep-alive: 2000

  jdbc:

    driver-class-name: com.amazon.opendistroforelasticsearch.jdbc.Driver

    url: jdbc:elasticsearch://http://100.90.27.5:9200

    hikari:

      maximum-pool-size: 20

      minimum-idle: 5

      pool-name: JDBC Connection Pool of Open Distro for Elasticsearch

      read-only: true

  username: admin

  password: Dctm@1234

  refresh:

    policy: IMMEDIATE

  scheme: http

  server:

    port: 9200

  enable: true

  host: 100.90.27.5

id:

  workerId: 1

inherit:

  acl:

    from:

      folder: true

journal:

  table: da_tdr_journals

# 权限是否开启，无��权限可修改为false

permission:

  enable: true

  max:

    interrupt:

      'on': ALL



repository:

  blobstore:

    impl: minio

  # 切换数据源  mysql,dm（达梦）,pg（PostgreDB）,mongodb

  documentstore:

    impl: mysql

    type: rdb

  password: Dctm@1234

  queryindexprovider:

    impl: elastic

  user: admin

settings:

  table: da_tdr_settings



# BPM工作流配置

workflow:

  processTypes:

    borrowing: borrowing_process

    borrowing_name: 档案借阅720

    opening_appraisal: opening_appraisal_process

    opening_appraisal_name: 开放鉴定

    destroy_appraisal: destroy_appraisal_process

    appraisal_confirm: appraisal_confirm

    push_opening_appraisal_task: jxttest

    custom_opening_appraisal: custom_opening_appraisal_process

    custom_opening_appraisal_name: 自定义人员开放鉴定

    disinfect_task: disinfect_task

    compiling_task: compiling_task

    publish_task: publish_task

    archive_repair: archive_repair

    security_appraisal: security_appraisal_process

    archive_inventory_task: archive_inventory_task


address:

  baidu: https://api.map.baidu.com/reverse_geocoding/v3/?ak=GgCca2FlM5PiuDgISotVRGR4LEMjtxkK&output=json&coordtype=wgs84ll&location=

application:

  white:

    header:

      enable: false

      host: 100.90.27.5

mybatis:

  mapper-locations: classpath*:mybatis/mapper/elasticsearch/*xml,classpath*:mybatis/mapper/mysql/*xml

file:

  category:

    map: 电子文件-DZ,图片-B,录音录像-LY

erms:

  # 推送鉴定的erms的地址

  address: http://10.68.190.225

  # 推送鉴定的审批单位code

  unitCode: ZNJDDW

screen:

  # 实体档案门类列表，英文逗号隔开

  physicalCarrierPath: /1226tdr-1226tdr/RM.档案管理/档案库/kjda.科技档案,/1226tdr-1226tdr/RM.档案管理/档案库/wsda.文书档案,/1226tdr-1226tdr/RM.档案管理/档案库/ywda.业务档案,/1226tdr-1226tdr/RM.档案管理/档案库/kj.会计,/1226tdr-1226tdr/RM.档案管理/档案库/tz.特种

  # 电子档案门类列表，英文逗号隔开

  electronicCarrierPath: /1226tdr-1226tdr/RM.档案管理/档案库/tjoa.统计oa,/1226tdr-1226tdr/RM.档案管理/档案库/np.内跑,/1226tdr-1226tdr/RM.档案管理/档案库/xzqlsx.行政权力事项,/1226tdr-1226tdr/RM.档案管理/档案库/dzkjpz.电子会计凭证,/1226tdr-1226tdr/RM.档案管理/档案库/xmtdzda.新媒体电子档案,/1226tdr-1226tdr/RM.档案管理/档案库/sxldzda.声像类电子档案

  # 库房显示顺序

  warehouseArray: 出生证明库房,实物库房实物库房实物库房实物库房实物库房,备份载体库房,语音载体库房,婚姻档案库房,图像载体库房

  # 驾驶舱“查档目的分析”图表，过多排版会有问题，建议10个以内

  queryPurposeArray: 个人取证,学术研究,编史修志,工作查考,经济建设,婚姻,土地、山林,其他



# 移交进馆解析定时任务时间配置

transfer:

  cron: 0 0/5 * * * ?
#网闸地址配置
push:
  address:
    tdr: tmp/tdr
    erms: tmp/erms
    transfer: tmp/transfer
period:
  maps:
    C: 30
    D: 10
    D10: 10
    D100: 100
    D30: 30
    D5: 5
    D50: 50