server:
  port: 8099
  servlet:
    context-path: /demoapi
spring:
  profiles:
    active: dev
  autoconfigure:
    exclude: org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
  messages:
    basename: i18n/messages
    encoding: UTF-8
    fallbackToSystemLocale: true
  thymeleaf:
    prefix: classpath:/static/
    suffix: .html
    cache: false
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
  redis:
    database: 0
    # 根据Redis部署地址更改IP
    host: redis.amberdata.cn
    jedis:
      pool:
        max-active: 20
        max-idle: 10
        max-wait: -1
        min-idle: 5
    password: Dctm@1234
    port: 6379
  servlet:
    multipart:
      enabled: true
      file-size-threshold: 100MB
      location: /amberdata/erms/data
      max-file-size: 5120MB
      max-request-size: 5120MB
  elasticsearch:
    rest:
      # 根据ES部署地址更改IP
      uris: [ "elasticsearch.amberdata.cn:9200" ]
      username: es_admin
      password: Dctm@1234
  datasource:
    driver-class-name: com.mysql.jdbc.Driver
    hikari:
      auto-commit: true
      connection-timeout: 30000
      idle-timeout: 180000
      max-lifetime: 1800000
      maximum-pool-size: 50
      minimum-idle: 10
    password: Dctm@1234
    # 根据Mysql部署地址更改IP
    url: jdbc:mysql://mysql.amberdata.cn:3306/ecmcore?useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=Asia/Shanghai
    username: ecmcore_user
logging:
  path: ./logs
  level:
    root: INFO
    org.hibernate: INFO
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.hibernate.type.descriptor.sql.BasicExtractor: TRACE
cn:
  amberdata:
    # 档号特殊字符正则校验配置，目前是大小写字母、数字、【-】、【·】
    archive-id-verify: "[a-z0-9A-Z\\-·]+"
    archive-title: 此件涉密，不扫描，不挂接
    archive-author: 空
    archive-articleNumber: 空
    # 档案同步查档直通车topic，也可不进行配置，默认使用RECORD_SYNC_TO_PLATFORM
    record-sync-topic: RECORD_SYNC_TO_PLATFORM
    # 【涉密质检】涉密等级配置（密级标准代码项值，逗号分开），配置后的等级判定为涉密
    secret-level: L2,L3
    sso:
      # 登录中心地址，根据admin部署地址更改IP
      login-domain: http://10.50.128.217:18080
    # CDN地址
    cdn:
      host: http://frontend.amberdata.cn:30080
    index:
      hash: b887fedd99eef3cccf7f,a6aff9013c0db15bf023,a6aff9013c0db15bf023,6285658d764b1f8b75b9,072be4925c70b4adbe58,100dcd59bd4fe90fd966,8bc8fd910348ca85e0ce,8bc8fd910348ca85e0ce,[gitBranch=release/V6.6.1]-[gitUser=wangyu]-[打包时间=2022-11-10 11:06]-[COMMIT_SHA=012159d6afd565618088d7b38d1a3d6dece1e9de]
    rocketmq:
      consumer:
        # 组名，无需更改
        group-name: xxxx
        # 配置mq消费者 IP（mq统一部署IP）
        namesrv-addr: 10.50.128.216:9876
        # 主题名，无需更改
        topic: TP_ADMIN_ORGANIZATION
      producer:
        group-name: xxxx
        # 配置mq生产者 IP（mq统一部署IP）
        namesrv-addr: 10.50.128.216:9876
        max-message-size: 12582912
    config:
      cache:
        init-caches:
          ermsapi-default:
            name: default
            ttl: -1
          ermsapi-other:
            name: other
            ttl: -1
    boot:
      blobstore:
        spring:
          boot:
            # 根据现场云存储类型进行更改：MinIOBlobStore（需部署MinIo）,
            # OSSBlobStore（阿里云）,OBSBlobStore(华为云)
            blob-store-impl-name: MinIOBlobStore
            primaryBId: 1
            routeStrategy: random
            store-nodes:
              - bId: 1
                endPoint: http://10.50.128.216:9000
                accessKey: admin
                secretKey: Dctm@1234
                bucketName: ecmcore
                desc: erms
    borrow:
      roleName: 档案管理员
    # 根据OCR��务部�������址更改IP
    ocr:
      url: http://192.168.10.14:8868/predict/ocr_system
    ocrUrl: http://192.168.10.14:8868/predict/ocr_system
    asr:
      url: ws://192.168.10.52:9090/paddlespeech/asr/streaming
    # 是否开启文档打标功能
    label-open: true
    # 根据文件获取标签列表的接口地址
    label-list-url: "http://192.168.10.205:17998/XS_pos"
dubbo:
  application:
    metadata-service-protocol: tri
  protocol:
    # 使用triple协议
    name: tri
    # port -1代表缺醒配置，triple协议默认使用的50051
    port: -1
  registry:
    address: zookeeper://10.50.128.217:2181?client=curator
  consumer:
    #关闭订阅服务是否启动的检查【检查时，没有服务提供者会报错】
    check: false
  scan:
    ### dubbo服务扫描包路径
    base-packages: cn.amberdata.erms.facade

# 去除db健康检查，影响整个sofaBoot启动，导致服务无法发布
management:
  health:
    db:
      enabled: false
# afc everyone 、 owner的权限配置
ace:
  everyone:
    access:
      id: bg000000000000000
      permit: Browse
  owner:
    access:
      id: bufffffffffffffff
      permit: Delete
      permit.extend: Change_Owner\,Change_Permit
# afc默认权限配置
default:
  acl:
    id: ba830238567694336
documents:
  linkpath:
    table: da_ecmcore_documents_link
  table: da_ecmcore_documents
# afc的es连接
es:
  client:
    keep-alive: 2000
  jdbc:
    driver-class-name: com.amazon.opendistroforelasticsearch.jdbc.Driver
    url: jdbc:elasticsearch://http://10.50.128.216:9200
    hikari:
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 900000
      maximum-pool-size: 20
      minimum-idle: 10
      pool-name: JDBC Connection Pool of Open Distro for Elasticsearch
      read-only: true
  username: admin
  password: Dctm@1234
  refresh:
    policy: IMMEDIATE
  scheme: http
  server:
    port: 9200
  enable: true
  host: 10.50.128.216
id:
  workerId: 1
inherit:
  acl:
    from:
      folder: true
journal:
  table: da_ecmcore_journals
# 权限是否开启，无��权限可修改为false
permission:
  enable: true
  max:
    interrupt:
      'on': ALL

repository:
  blobstore:
    impl: minio
  # 切换数据源  mysql,dm（达梦）,pg（PostgreDB）,mongodb
  documentstore:
    impl: mysql
    type: rdb
  password: Dctm@1234
  queryindexprovider:
    impl: elastic
  user: admin
settings:
  table: da_ecmcore_settings

login:
  unique:
    device: false

# BPM工作流配置
workflow:
  processTypes:
    borrowing: borrowing_process
    opening_appraisal: opening_appraisal_process
    destroy_appraisal: destroy_appraisal_process
    appraisal_confirm: appraisal_confirm

address:
  baidu: https://api.map.baidu.com/reverse_geocoding/v3/?ak=GgCca2FlM5PiuDgISotVRGR4LEMjtxkK&output=json&coordtype=wgs84ll&location=
application:
  white:
    header:
      enable: true
      host: 10.50.128.217,localhost:8001,192.168.126.128,localhost:18080,10.50.128.217:18080,218.72.253.211,10.27.165.104,220.191.236.246:1880,localhost:8099,10.50.128.217:8099

mybatis:
  mapper-locations: classpath*:mybatis/mapper/elasticsearch/*xml,classpath*:mybatis/mapper/mysql/*xml
file:
  category:
    map: 电子文件-DZ,图片-B,录音录像-LY
